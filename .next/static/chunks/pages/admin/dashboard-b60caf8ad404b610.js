(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{1607:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5030).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])},1856:(e,t,a)=>{e.exports=a(9359)},2006:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5030).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2469:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5030).A)("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},2713:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return a(6216)}])},3757:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5030).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5030:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(148);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:n,className:d="",children:o,iconNode:x,...m}=e;return(0,s.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:a,strokeWidth:n?24*Number(c)/Number(r):c,className:l("lucide",d),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),n=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:n,...d}=a;return(0,s.createElement)(c,{ref:i,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...d})});return a.displayName=r(e),a}},6216:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5640),r=a(148),l=a(1856),i=a(2469),c=a(3757),n=a(9212),d=a(1607),o=a(2006),x=a(5030);let m=(0,x.A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),h=(0,x.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),u=(0,x.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,x.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),y=(0,x.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function g(){let[e,t]=(0,r.useState)(null),[a,x]=(0,r.useState)("profesores"),[g,f]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[w,b]=(0,r.useState)([]),[v,k]=(0,r.useState)(!0),[A,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(""),[_,L]=(0,r.useState)(""),[M,z]=(0,r.useState)(!1),[q,B]=(0,r.useState)(""),[D,I]=(0,r.useState)(null),[P,U]=(0,r.useState)(null),V=(0,l.useRouter)(),T=async e=>{try{k(!0);let t=await fetch("/api/admin/profesores",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();f(e)}let a=await fetch("/api/admin/usuarios",{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();N(e)}let s=await fetch("/api/admin/administradores",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();b(e)}}catch(e){C("Error al cargar datos")}finally{k(!1)}};(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),a=localStorage.getItem("profesor");if(!e||!a)return void V.push("/login");let s=JSON.parse(a);if("admin"!==s.role)return void V.push("/login");U(s),t(s),T(e)},[V]);let H=async(e,t)=>{if(!confirm("\xbfEst\xe1s seguro de que quieres eliminar este elemento?"))return;let a=localStorage.getItem("token"),s="";switch(e){case"profesor":s="/api/admin/profesores/".concat(t);break;case"usuario":s="/api/admin/usuarios/".concat(t);break;case"admin":s="/api/admin/administradores/".concat(t)}try{let e=await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(e.ok)E("Elemento eliminado correctamente"),T(a);else{let t=await e.json();C(t.error||"Error al eliminar")}}catch(e){C("Error de conexi\xf3n")}},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;B(e),I(t),z(!0)},F=g.filter(e=>e.nombre_completo.toLowerCase().includes(_.toLowerCase())||e.correo.toLowerCase().includes(_.toLowerCase())),R=j.filter(e=>e.username.toLowerCase().includes(_.toLowerCase())),W=w.filter(e=>e.username.toLowerCase().includes(_.toLowerCase()));return v?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Cargando panel de administraci\xf3n..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Panel de Administraci\xf3n"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-gray-700",children:["Admin: ",null==e?void 0:e.username]}),(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),V.push("/")},className:"flex items-center text-gray-600 hover:text-red-600 transition-colors",children:[(0,s.jsx)(i.A,{className:"w-5 h-5 mr-1"}),"Cerrar Sesi\xf3n"]})]})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[A&&(0,s.jsxs)("div",{className:"mb-6 flex items-center space-x-2 text-red-600 bg-red-50 p-4 rounded-lg",children:[(0,s.jsx)(c.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:A}),(0,s.jsx)("button",{onClick:()=>C(""),className:"ml-auto text-red-400 hover:text-red-600",children:"\xd7"})]}),S&&(0,s.jsxs)("div",{className:"mb-6 flex items-center space-x-2 text-green-600 bg-green-50 p-4 rounded-lg",children:[(0,s.jsx)(n.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:S}),(0,s.jsx)("button",{onClick:()=>E(""),className:"ml-auto text-green-400 hover:text-green-600",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.A,{className:"w-8 h-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Profesores"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.length})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(o.A,{className:"w-8 h-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Usuarios"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.length})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m,{className:"w-8 h-8 text-purple-600"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Administradores"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.length})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8 px-6",children:[(0,s.jsx)("button",{onClick:()=>x("profesores"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("profesores"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Profesores"}),(0,s.jsx)("button",{onClick:()=>x("usuarios"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("usuarios"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Usuarios"}),(0,s.jsx)("button",{onClick:()=>x("administradores"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("administradores"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Administradores"})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar...",value:_,onChange:e=>L(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("button",{onClick:()=>O(a.slice(0,-1)),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,s.jsx)(u,{className:"w-4 h-4 mr-2"}),"Agregar ",a.slice(0,-1)]})]}),"profesores"===a&&(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categor\xeda"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grado"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nombre_completo}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.correo}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.categoria}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.grado_academico}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>O("profesor",e),className:"text-blue-600 hover:text-blue-900 mr-3",children:(0,s.jsx)(p,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>H("profesor",e.id),className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(y,{className:"w-4 h-4"})})]})]},e.id))})]})}),"usuarios"===a&&(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profesor ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Creaci\xf3n"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.username}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.profesor_id||"No asignado"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("es-ES")}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>O("usuario",e),className:"text-blue-600 hover:text-blue-900 mr-3",children:(0,s.jsx)(p,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>H("usuario",e.username),className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(y,{className:"w-4 h-4"})})]})]},e.username))})]})}),"administradores"===a&&(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Creaci\xf3n"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.username}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("es-ES")}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>O("administrador",e),className:"text-blue-600 hover:text-blue-900 mr-3",children:(0,s.jsx)(p,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>H("admin",e.username),className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(y,{className:"w-4 h-4"})})]})]},e.username))})]})})]})]})]}),M&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:[D?"Editar":"Agregar"," ",q]}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Funcionalidad de formulario pendiente de implementaci\xf3n"}),(0,s.jsx)("button",{onClick:()=>{z(!1),B(""),I(null)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Cerrar"})]})})]})}},9212:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5030).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])}},e=>{e.O(0,[636,593,792],()=>e(e.s=2713)),_N_E=e.O()}]);